---
name: chat-cleanup
description: –û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞ –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è. –í—ã–∑—ã–≤–∞–π –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç "–æ—á–∏—Å—Ç–∏ —á–∞—Ç", "–∫–æ–Ω–µ—Ü –¥–Ω—è", "—Å–æ—Ö—Ä–∞–Ω–∏ –∏ –æ—á–∏—Å—Ç–∏", "chat cleanup", "—É–±–µ—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å–∫—É", "—É–¥–∞–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–∞". –°–∫–∏–ª–ª: 1) –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≤–∞–∂–Ω–æ–µ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —Å–µ—Å—Å–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø–∞–º—è—Ç—å, 2) –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—á–∏—Å—Ç–∫—É, 3) –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram —á–∞—Ç–∞.
---

# Chat Cleanup

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Bot Token:** `${TELEGRAM_BOT_TOKEN}`
- **Chat ID:** `685668909`
- **–°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω–∏—è:** `skills/chat-cleanup/scripts/delete_messages.sh`

## Workflow

### –®–∞–≥ 1 ‚Äî –ò–∑–≤–ª–µ—á—å –≤–∞–∂–Ω–æ–µ –∏–∑ —Å–µ—Å—Å–∏–∏

–ò—Å–ø–æ–ª—å–∑—É–π `sessions_history(sessionKey="agent:main:main", limit=100)` —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é.

–ò–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–≤–ª–µ–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ `memory/YYYY-MM-DD.md` (—Å–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞):

- ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è (–∑–∞–¥–∞—á–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è, –¥–µ–ø–ª–æ–∏)
- üí° –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –∏–Ω—Å–∞–π—Ç—ã
- üêõ –ü—Ä–æ–±–ª–µ–º—ã –∏ –∫–∞–∫ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã
- ‚è≥ –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ / —Ç–æ —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞–≤—Ç—Ä–∞
- üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ / –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

–ï—Å–ª–∏ –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏ ‚Äî –æ–±–Ω–æ–≤–∏ `MEMORY.md`.

–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏ –≤ memory —Ñ–∞–π–ª:

```markdown
## Chat Cleanup ‚Äî –ß–ß:–ú–ú UTC

### ‚úÖ –°–¥–µ–ª–∞–Ω–æ

- ...

### üí° –†–µ—à–µ–Ω–∏—è

- ...

### ‚è≥ –ù–∞ –∑–∞–≤—Ç—Ä–∞

- ...
```

### –®–∞–≥ 2 ‚Äî –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

–ü–æ–∫–∞–∂–∏ –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Ç–æ–≥–æ, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ:

```
üìù –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ø–∞–º—è—Ç—å:
‚úÖ –°–¥–µ–ª–∞–Ω–æ: [–∫—Ä–∞—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫]
üí° –†–µ—à–µ–Ω–∏—è: [–∫—Ä–∞—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫]
‚è≥ –ù–∞ –∑–∞–≤—Ç—Ä–∞: [–∫—Ä–∞—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫]

–£–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É –∏–∑ —á–∞—Ç–∞? (–ø–æ–¥—Ç–≤–µ—Ä–¥–∏ "–¥–∞")
```

### –®–∞–≥ 3 ‚Äî –ñ–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

–£–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —è–≤–Ω–æ–≥–æ "–¥–∞" / "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é" / "–¥–∞–≤–∞–π" –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### –®–∞–≥ 4 ‚Äî –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

–¢–µ–∫—É—â–∏–π message_id –¥–æ—Å—Ç—É–ø–µ–Ω –≤ inbound metadata. –£–¥–∞–ª—è–π –æ—Ç `(current_message_id - 500)` –¥–æ `(current_message_id - 1)`.

```bash
bash /home/openclaw/.openclaw/skills/chat-cleanup/scripts/delete_messages.sh \
  "${TELEGRAM_BOT_TOKEN}" \
  "685668909" \
  <FROM_ID> \
  <TO_ID>
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram:** —Å–æ–æ–±—â–µ–Ω–∏—è —Å—Ç–∞—Ä—à–µ 48 —á–∞—Å–æ–≤ —É–¥–∞–ª–∏—Ç—å –Ω–µ–ª—å–∑—è ‚Äî —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è: –∫–æ—Ä–æ—Ç–∫–æ —Å–æ–æ–±—â–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

## –í–∞–∂–Ω–æ

- –°–Ω–∞—á–∞–ª–∞ –í–°–ï–ì–î–ê —Å–æ—Ö—Ä–∞–Ω—è–π, –ø–æ—Ç–æ–º –ø—Ä–µ–¥–ª–∞–≥–∞–π —É–¥–∞–ª–∏—Ç—å
- –ù–µ —É–¥–∞–ª—è—Ç—å –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–µ–∫—Ä–µ—Ç—ã (—Ç–æ–∫–µ–Ω—ã, –ø–∞—Ä–æ–ª–∏) –≤ –ø–∞–º—è—Ç—å —Ñ–∞–π–ª—ã
- –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–∏ –ø—É—Å—Ç–∞ ‚Äî —Å–æ–æ–±—â–∏ –æ–± —ç—Ç–æ–º –∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏ –æ—á–∏—Å—Ç–∏—Ç—å
