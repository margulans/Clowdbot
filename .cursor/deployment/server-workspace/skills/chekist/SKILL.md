---
name: chekist
description: ะงะตะบะธัั โ ะตะถะตัะฐัะฝัะน ะฐัะดะธัะพั ัะธััะตะผั. ะงะธัะฐะตั data/incidents.jsonl, ะฐะณัะตะณะธััะตั ัะพะฑััะธั ะทะฐ ะฟะพัะปะตะดะฝะธะน ัะฐั, ัะฒะตะดะพะผะปัะตั ะะฐัะณัะปะฐะฝะฐ ัะพะปัะบะพ ะฟัะธ ะบัะธัะธัะตัะบะธั ะธะฝัะธะดะตะฝัะฐั.
---

# ะงะตะบะธัั ๐ต๏ธ

> ยซะะฐะถะดัะน ัะฐั โ ัะฒะพะดะบะฐ. ะัะธัะธัะตัะบะพะต โ ะฝะตะผะตะดะปะตะฝะฝะพ. ะะตะปะพัะธ โ ะฒ ะฐััะธะฒ.ยป

ะะฐะฑะพัะฐะตั ะฒ ะธะทะพะปะธัะพะฒะฐะฝะฝะพะผ ัะพะฝะพะฒะพะผ ัะตะถะธะผะต. ะงะธัะฐะตั ะถััะฝะฐะป ะธะฝัะธะดะตะฝัะพะฒ ะพั ะฃัะฐััะบะพะฒะพะณะพ ะธ ัะตัะฐะตั: ัะธัะพ ะฟัะพะนัะธ ะผะธะผะพ ะธะปะธ ะฟะพะดะฝััั ััะตะฒะพะณั. **ะะต ัะธะฝะธั ัะฐะผ โ ะฝะฐ ััะพ ะตััั ะะตัะฐะฝะธะบ.**

---

## ะะปะณะพัะธัะผ

### ะจะฐะณ 1. ะงัะตะฝะธะต ะถััะฝะฐะปะฐ

#### 1.1 ะะฝัะธะดะตะฝัั ะพั ะฃัะฐััะบะพะฒะพะณะพ/ะะตัะฐะฝะธะบะฐ

ะัะบัะพะน `data/incidents.jsonl`. ะัะฑะตัะธ ะฒัะต ะทะฐะฟะธัะธ ะทะฐ ะฟะพัะปะตะดะฝะธะต 60 ะผะธะฝัั (ััะฐะฒะฝะธ `ts` ั ัะตะบััะธะผ ะฒัะตะผะตะฝะตะผ).

ะัะดะตะปัะฝะพ ัะพะฑะตัะธ `resolved_ref_ids` (ะฒัะต `ref_id` ะธะท ะทะฐะฟะธัะตะน ั `type == "resolved"`).

ะัะธ ัะพัะผะธัะพะฒะฐะฝะธะธ ัะฟะธัะบะฐ ะฐะบัะธะฒะฝัั ะธะฝัะธะดะตะฝัะพะฒ ััะธัะฐะน ะทะฐะฟะธัั ะทะฐะบัััะพะน, ะตัะปะธ:

- ะตััั `id` ะธ ะพะฝ ะฟัะธัััััะฒัะตั ะฒ `resolved_ref_ids`, ะธะปะธ
- ะฝะตั `id`, ะฝะพ ะตััั `ref_id` ะธ ะพะฝ ะฟัะธัััััะฒัะตั ะฒ `resolved_ref_ids`, ะธะปะธ
- ะฝะตั `id` ะธ `ref_id`, ะฝะพ ะตััั fallback-ะบะปัั `"<type>:<source>"` ะฒ `resolved_ref_ids`.

#### 1.2 ะัะธะฑะบะธ cron jobs (ะดะธะฐะณะฝะพััะธะบะฐ)

ะขะฐะบะถะต ะพะฑัะทะฐัะตะปัะฝะพ ะฟัะพะฒะตัั **ัะพััะพัะฝะธะต cron jobs** ัะตัะตะท `cron(action=list)`:

- ะตัะปะธ ั job `state.lastStatus == "error"` **ะธะปะธ** `state.consecutiveErrors > 0` โ ััะพ ััะธัะฐะตััั ะฟะฐะดะตะฝะธะตะผ.

ะะปั ะบะฐะถะดะพะน ัะฐะบะพะน job **ะดะพะฑะฐะฒั ะทะฐะฟะธัั ะฒ `data/incidents.jsonl`** (ััะพะฑั ะฑัะปะฐ ะตะดะธะฝะฐั ะปะตะฝัะฐ ะธะฝัะธะดะตะฝัะพะฒ ะธ ะฑัะปะพ ััะพ ะฐะปะตััะธัั):

```json
{
  "ts": "<ISO8601>",
  "type": "cron_error",
  "source": "chekist",
  "severity": "critical",
  "jobId": "<job.id>",
  "job": "<job.name>",
  "model": "<payload.model ะธะปะธ ->",
  "msg": "cron job error: lastStatus=<...> consecutiveErrors=<...> lastRunAtMs=<...>"
}
```

ะะฐะถะฝะพ: ะฝะต ัะฟะฐะผั ะดัะฑะปะธะบะฐัะฐะผะธ ะบะฐะถะดัะน ัะฐั โ ะตัะปะธ ะทะฐ ะฟะพัะปะตะดะฝะธะต 3 ัะฐัะฐ ัะถะต ะตััั `cron_error` ั ัะตะผ ะถะต `jobId` ะธ `lastRunAtMs`, ะฝะพะฒัั ะทะฐะฟะธัั ะฝะต ะดะพะฑะฐะฒะปัะน.

### ะจะฐะณ 2. ะะปะฐััะธัะธะบะฐัะธั

ะััะฟะฟะธััะน ัะพะฑััะธั ะฟะพ ัะธะฟั:

| ะขะธะฟ                | ะะตะนััะฒะธะต                                                             |
| ------------------ | -------------------------------------------------------------------- |
| `ok`               | ะะณะฝะพัะธััะน                                                            |
| `cron_skip`        | ๐ด ะัะธัะธัะฝะพ โ ะะตัะฐะฝะธะบ ะดะพะปะถะตะฝ ะฒะผะตัะฐัััั                               |
| `cron_error`       | ๐ด ะัะธัะธัะฝะพ โ ะะตัะฐะฝะธะบ ะดะพะปะถะตะฝ ะฒะผะตัะฐัััั                               |
| `gateway_down`     | ๐ด ะัะธัะธัะฝะพ โ ะฝะตะผะตะดะปะตะฝะฝัะน ะฐะปะตัั + ะฒัะทะพะฒ ะะตัะฐะฝะธะบะฐ                     |
| `backup_triggered` | ๐ก ะัะตะดัะฟัะตะถะดะตะฝะธะต โ ะพัะฝะพะฒะฝะฐั ะทะฐะดะฐัะฐ ัะฟะฐะปะฐ                            |
| `disk_warn`        | ๐ก ะัะตะดัะฟัะตะถะดะตะฝะธะต โ ะทะฐะฟะธัะฐัั, ะฝะต ะฑะตัะฟะพะบะพะธัั                          |
| `git_dirty`        | ๐ก ะัะตะดัะฟัะตะถะดะตะฝะธะต โ ะทะฐะฟะธัะฐัั, ะฝะต ะฑะตัะฟะพะบะพะธัั                          |
| `scout_stale`      | ๐ก ะัะตะดัะฟัะตะถะดะตะฝะธะต โ Scout ะฝะต ะทะฐะฟัััะธะปัั ะฝะพััั, ัะฒะตะดะพะผะธัั ะะฐัะณัะปะฐะฝะฐ   |
| `config_drift`     | ๐ก ะัะตะดัะฟัะตะถะดะตะฝะธะต โ ะบะพะฝัะธะณ ะธะทะผะตะฝะธะปัั ะฝะตะพะถะธะดะฐะฝะฝะพ, ัะฒะตะดะพะผะธัั ะะฐัะณัะปะฐะฝะฐ |

### ะจะฐะณ 3. ะขะธัะธะต ัะฐัั

ะขะตะบััะตะต ะฒัะตะผั ะฒ UTC:

- **23:00โ06:00 UTC** = ัะธัะธะต ัะฐัั โ ะฟะพ ัะผะพะปัะฐะฝะธั ะฝะต ะฐะปะตััั ะฟะพะปัะทะพะฒะฐัะตะปั.

ะัะบะปััะตะฝะธั (ะฐะปะตััะธัั **ะฒัะตะณะดะฐ**, ะดะฐะถะต ะฒ ัะธัะธะต ัะฐัั):
- `config_drift`
- `cron_error` (ะฟะพะปัะทะพะฒะฐัะตะปั ัะพัะตั ัะฒะตะดะพะผะปะตะฝะธะต ะฟะพ ะปัะฑะพะผั ะฟะฐะดะตะฝะธั job)

### ะจะฐะณ 4. ะะปะตัั ะฟะพะปัะทะพะฒะฐัะตะปั (ะตัะปะธ ะฝัะถะตะฝ)

#### 4.1 ะัะธัะธัะตัะบะธะต ะธะฝัะธะดะตะฝัั

ะัะปะธ ะตััั **ะฐะบัะธะฒะฝัะน** `severity=critical` (ะฟะพัะปะต ัะธะปัััะฐ ะฟะพ `resolved_ref_ids`) โ ะพัะฟัะฐะฒั ะผะฐะบัะธะผะฐะปัะฝะพ ะบะพะฝะบัะตัะฝัะน ะฐะปะตัั (ััะพะฑั ะฝะต ะฑัะปะพ ยซCron failedยป ะฑะตะท ะดะตัะฐะปะตะน).

ะัะธะผะตัะฐะฝะธะต: ะดะปั `cron_error` ะธ `config_drift` ััะพ ัะฐะฑะพัะฐะตั **ะฒัะตะณะดะฐ**, ะฒะบะปััะฐั ัะธัะธะต ัะฐัั (ัะผ. ะจะฐะณ 3).

```
๐ต๏ธ ะงะตะบะธัั โ ะบัะธัะธัะตัะบะธะน ะฐะปะตัั
โโโโโโโโโโโโโโโโโโโโโโโโโโ
ะขะธะฟ: <type>
ะัะตะผั: <ts> (ะะปะผะฐัั)
Job: <job name> | <job id ะตัะปะธ ะตััั>
ะัะธะฑะบะธ ะฟะพะดััะด: <consecutiveErrors ะตัะปะธ ะธะทะฒะตััะฝะพ>
ะกััั: <msg>

ะงัะพ ะดะตะปะฐัั:
- ะตัะปะธ ััะพ `model not allowed` โ ะฟะพะผะตะฝััั model ะฒ cron job
- ะตัะปะธ ััะพ `cron announce delivery failed` โ ะฟะพััะฐะฒะธัั delivery.mode=none ะธ ัะปะฐัั ัะฒะตะดะพะผะปะตะฝะธั ัะตัะตะท message tool
- ะตัะปะธ ััะพ `timeout` โ ัะฒะตะปะธัะธัั timeoutSeconds
โโโโโโโโโโโโโโโโโโโโโโโโโโ
ะะตัะฐะฝะธะบ ัะถะต ะฟะพะปััะธะป ะทะฐะดะฐัั.
```

#### 4.2 ะัะตะดัะฟัะตะถะดะตะฝะธั, ะบะพัะพััะต ะฒัั ัะฐะฒะฝะพ ััะตะฑััั ะฐะปะตััะฐ

ะะตะบะพัะพััะต `severity=warn` **ะฝัะถะฝะพ ะฐะปะตััะธัั**, ะฟะพัะพะผั ััะพ ััะพ ัะธะณะฝะฐะป ยซััะพ-ัะพ ัะปะพะผะฐะปะพัั/ะดัะตะนััะตัยป, ะดะฐะถะต ะตัะปะธ ะฝะต critical.

ะัะปะธ ะธะฝัะธะดะตะฝั **ะฐะบัะธะฒะฝัะน** โ ะพัะฟัะฐะฒั ะฐะปะตัั ะฒ ะปะธัะบั (tg:685668909).

ะัะบะปััะตะฝะธะต: **`scout_stale` โ ะฐะปะตััะธัั ัะพะปัะบะพ ะตัะปะธ ะฝะต ัะธัะธะต ัะฐัั**.

**ะะปั `scout_stale`:**

```
๐ต๏ธ ะงะตะบะธัั โ ะฒะฝะธะผะฐะฝะธะต
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ๏ธ Scout ะฝะต ะทะฐะฟัััะธะปัั ััะพะน ะฝะพััั.
ะะตัััั (ะั 02:00) ะฝะต ะทะฐะฒะตัััะฝ โ data/scout-discoveries.json ะฝะต ะพะฑะฝะพะฒะปัะฝ.
ะะตัะฐะฝะธะบ ะฟะพะปััะธะป ะทะฐะดะฐัั.
```

**ะะปั `config_drift`:**

```
๐ต๏ธ ะงะตะบะธัั โ ะบะพะฝัะธะณ ะธะทะผะตะฝะธะปัั
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ๏ธ <msg ะธะท ะธะฝัะธะดะตะฝัะฐ>
ะขัะตะฑัะตััั ะฟัะพะฒะตัะบะฐ: ะบะพะฝัะธะณ ะธะทะผะตะฝัะฝ ะฒัััะฝัั ะธะปะธ ะฟะพัะตััะฝ drop-in ัะฐะนะป.
โโโโโโโโโโโโโโโโโโโโโโโโโโ
```

ะัะปะธ ัะตะนัะฐั ัะธัะธะต ัะฐัั โ **ะฝะต ะฐะปะตััั**, ัะพะปัะบะพ ะทะฐะฟะธัะธ audit (ะะตัะฐะฝะธะบ ะฒัั ัะฐะฒะฝะพ ัะฒะธะดะธั ะฟะพ ะถััะฝะฐะปั).

### ะจะฐะณ 4ะฑ. ะะถะตะดะฝะตะฒะฝัะน ะพัััั ะฟะพ ะบะพะฝัะธะณั

ะัะฟะพะปะฝัะน **ะพะดะธะฝ ัะฐะท ะฒ ัััะบะธ** โ ัะพะปัะบะพ ะตัะปะธ ัะตะบััะธะน ัะฐั = 04 UTC (09:00 ะะปะผะฐัั).

ะะปั ะฟัะพะฒะตัะบะธ ัะฝะธะบะฐะปัะฝะพััะธ โ ัะฑะตะดะธัั ััะพ ะทะฐ ะฟะพัะปะตะดะฝะธะต 23 ัะฐัะฐ ะฒ `data/incidents.jsonl` ะฝะตั ะทะฐะฟะธัะธ `type=config_report`.

1. ะงะธัะฐะน `openclaw.json`
2. ะงะธัะฐะน ัะฟะธัะพะบ ัะฐะนะปะพะฒ ะฒ `~/.config/systemd/user/openclaw-gateway.service.d/`
3. ะคะพัะผะธััะน ะธ ะพัะฟัะฐะฒะปัะน ะฒ ะปะธัะบั (tg:685668909):

```
๐ต๏ธ ะงะตะบะธัั โ ะตะถะตะดะฝะตะฒะฝัะน ะพัััั ะบะพะฝัะธะณะฐ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ค ะะพะดะตะปั: <agents.defaults.model.primary>
๐ ะะพะธัะบ: <tools.web.search.provider> / <tools.web.search.perplexity.model>
๐ ะัะดะธะพ: <tools.media.audio.models[0].provider> <tools.media.audio.models[0].model>
๐ฌ DM Policy: <channels.telegram.dmPolicy>
โก ะะฐัะฐะปะปะตะปะธะทะผ: <maxConcurrent> ะฐะณะตะฝัะพะฒ / <subagents.maxConcurrent> ััะฑะฐะณะตะฝัะพะฒ
๐ Systemd drop-ins: <ัะฟะธัะพะบ conf-ัะฐะนะปะพะฒ>
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะัั ะฒ ะฟะพััะดะบะต  |  โ๏ธ ะัะตะนัะพะฒ ะทะฐ ัััะบะธ: N
```

4. ะะพะฑะฐะฒั ะทะฐะฟะธัั ะฒ `data/incidents.jsonl`:

```json
{
  "ts": "<ISO8601>",
  "type": "config_report",
  "source": "chekist",
  "severity": "info",
  "msg": "daily config report sent"
}
```

ะะดะธะฝ ะฐะปะตัั ะฝะฐ ัะฝะธะบะฐะปัะฝัะน ะธะฝัะธะดะตะฝั (ะฝะต ะฟะพะฒัะพััะน ะพะดะฝะพ ะธ ัะพ ะถะต ัะพะฑััะธะต ะบะฐะถะดัะน ัะฐั).
ะะปั ะฟัะพะฒะตัะบะธ ัะฝะธะบะฐะปัะฝะพััะธ โ ััะฐะฒะฝะธ `id` ะฟะพะปั ะธะปะธ `type+job` ะทะฐ ะฟะพัะปะตะดะฝะธะต 3 ัะฐัะฐ.

### ะจะฐะณ 5. ะะพะฑะฐะฒะธัั ะทะฐะฟะธัั ะพ ะฟัะพะฒะตัะบะต

ะะพะฑะฐะฒั ะฒ ะบะพะฝะตั `data/incidents.jsonl`:

```json
{
  "ts": "<ISO8601>",
  "type": "audit",
  "source": "chekist",
  "severity": "info",
  "msg": "hourly audit: <N> critical, <M> warn, <K> ok in last 60min"
}
```

### ะจะฐะณ 6. ะะพะผะผะธั

ะัะปะธ ะฒ ะถััะฝะฐะปะต ะฑัะปะธ ะธะทะผะตะฝะตะฝะธั (ะฝะพะฒัะต resolved-ะทะฐะฟะธัะธ ะธะปะธ audit-ะทะฐะฟะธัั):

```
git -C ~/Clowdbot add data/incidents.jsonl
git -C ~/Clowdbot commit -m "chore: chekist audit <YYYY-MM-DD HH:MM>"
git -C ~/Clowdbot push
```

---

## ะคะพัะผะฐั ะพัะฒะตัะฐ (ะฒ ัะฐั โ ัะพะปัะบะพ ะตัะปะธ ะฒัะทะฒะฐะฝ ะฒัััะฝัั)

```
๐ต๏ธ ะงะตะบะธัั โ ัะตะฒะธะทะธั ะทะฐ ะฟะพัะปะตะดะฝะธะน ัะฐั
โโโโโโโโโโโโโโโโโโโโ
๐ด ะัะธัะธัะตัะบะธั: N
๐ก ะัะตะดัะฟัะตะถะดะตะฝะธะน: M
โ ะะพัะผะฐ: K
โโโโโโโโโโโโโโโโโโโโ
[ะัะฐัะบะธะน ัะฟะธัะพะบ ะบัะธัะธัะตัะบะธั, ะตัะปะธ ะตััั]
```
